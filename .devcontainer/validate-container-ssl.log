ğŸ” Container SSL Certificate Environment Analysis
==============================================

1. Checking SSL Environment Variables in Container...
   âŒ SSL_CERT_FILE = NOT SET
   âŒ REQUESTS_CA_BUNDLE = NOT SET
   âŒ CURL_CA_BUNDLE = NOT SET
   âŒ NODE_EXTRA_CA_CERTS = NOT SET
   âœ… NIX_SSL_CERT_FILE = /etc/ssl/certs/ca-certificates.crt
      ğŸ“ File exists (3638 lines)
      ğŸ” Contains 147 certificate(s)
   âŒ HTTPS_CA_BUNDLE = NOT SET
   âŒ CA_BUNDLE = NOT SET

2. Checking Container Certificate Locations...
   âœ… File exists: /etc/ssl/certs/ca-certificates.crt (3638 lines)
      ğŸ” Contains 147 certificate(s)
   âŒ Not found: /etc/ssl/certs/ca-bundle.crt
   âœ… Directory exists: /usr/local/share/ca-certificates/ (1 certificates)
   âœ… File exists: /etc/ca-certificates.conf (157 lines)
   âœ… Directory exists: /usr/local/share/ca-certificates/corporate/ (0 certificates)
   âœ… File exists: /etc/ssl/certs/zscaler-root-ca.pem (28 lines)
      ğŸ” Contains 1 certificate(s)
   âœ… File exists: /usr/local/share/ca-certificates/zscaler-root-ca.crt (28 lines)
      ğŸ” Contains 1 certificate(s)

3. Checking Certificate Installation...
   âœ… update-ca-certificates command available
   ğŸ“‹ Certificate bundle info:
      System bundle contains 147 certificates

4. Testing SSL Connectivity from Container...
   Testing https://nixos.org...
      âœ… curl: SUCCESS
      âœ… wget: SUCCESS
   Testing https://github.com...
      âœ… curl: SUCCESS
      âœ… wget: SUCCESS
   Testing https://cache.nixos.org...
      âœ… curl: SUCCESS
      âœ… wget: SUCCESS
   Testing https://channels.nixos.org...
      âœ… curl: SUCCESS
      âœ… wget: SUCCESS

5. Testing APT SSL Configuration...
   âŒ APT cannot connect to repositories

6. Testing Nix Installation Requirements...
   Testing Nix installer: https://nixos.org/nix/install
      âœ… Nix installer accessible
   Testing Nix installer: https://install.determinate.systems/nix
      âœ… Nix installer accessible

ğŸ“‹ CONTAINER RECOMMENDATIONS:
============================

ğŸ”§ Missing Environment Variables in Container:
   - SSL_CERT_FILE
   - REQUESTS_CA_BUNDLE
   - CURL_CA_BUNDLE
   - NODE_EXTRA_CA_CERTS
   - HTTPS_CA_BUNDLE
   - CA_BUNDLE

ğŸ’¡ These should be set in devcontainer.json containerEnv section

ğŸ’¡ Found working certificate file: /etc/ssl/certs/ca-certificates.crt

ğŸ”§ Recommended Container Environment Variables:
   SSL_CERT_FILE=/etc/ssl/certs/ca-certificates.crt
   REQUESTS_CA_BUNDLE=/etc/ssl/certs/ca-certificates.crt
   CURL_CA_BUNDLE=/etc/ssl/certs/ca-certificates.crt
   NODE_EXTRA_CA_CERTS=/etc/ssl/certs/ca-certificates.crt
   NIX_SSL_CERT_FILE=/etc/ssl/certs/ca-certificates.crt

ğŸš€ Next Steps for Container:
1. Update devcontainer.json with proper certificate mounting
2. Update Dockerfile to install certificates properly
3. Set environment variables in devcontainer.json
4. Rebuild container and test again

âœ… Container SSL Analysis Complete!
